<div id="<%= dom_id comment %>">
<article>
  <%= render partial: 'users/shared/profile_avatar', locals: {user: comment.user}%>
  <div class="comment-username">
    <p><%= comment.body %></p>
    <div>
      <% if current_user == comment.user %>
        <%= link_to "Edit", edit_post_comment_path(comment.post ,comment) %>
        <%= link_to "Delete", post_comment_path(comment.post, comment),
            data: { turbo_method: :delete,
                    turbo_confirm: "Are you sure?"} %>
      <% end %>
    </div>
  </div>
  <small>by <%= comment.user.username %></small>
</article>
<%= render partial: "comments/likes", locals: { comment: comment } %>
<hr/>
<% if comment.depth == 0 %>
  <div data-controller="comment-form">
    <%= link_to "Reply", "#", data: { action: "click->comment-form#toggleForm" } %>
    <div class="comment-form hide" data-comment-form-target="form" >
      <%= render partial: "comments/form", locals: {post: comment.post, parent: comment } %>
    </div>
  </div>
<% end %>
<div class="sub-comment">
  <%= render comment.comments.includes([:user, :post]).order(id: :desc) %>
</div>
</div>
